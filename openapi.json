{"openapi":"3.1.0","info":{"title":"Pockito API","description":"Personal Finance Application API","contact":{"name":"Pockito Team","email":"pockito@ghassen.io"},"license":{"name":"MIT License","url":"https://opensource.org/licenses/MIT"},"version":"1.0.0"},"servers":[{"url":"http://localhost:8080","description":"Generated server url"}],"tags":[{"name":"User Management","description":"APIs for managing application users"}],"paths":{"/api/wallets/{walletId}":{"get":{"tags":["wallet-controller"],"operationId":"getWallet","parameters":[{"name":"walletId","in":"path","required":true,"schema":{"type":"string","format":"uuid"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/WalletDto"}}}}}},"put":{"tags":["wallet-controller"],"operationId":"updateWallet","parameters":[{"name":"walletId","in":"path","required":true,"schema":{"type":"string","format":"uuid"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/WalletDto"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/WalletDto"}}}}}},"delete":{"tags":["wallet-controller"],"operationId":"deleteWallet","parameters":[{"name":"walletId","in":"path","required":true,"schema":{"type":"string","format":"uuid"}}],"responses":{"200":{"description":"OK"}}}},"/api/users/{username}/currency":{"put":{"tags":["User Management"],"summary":"Update user default currency","description":"Updates the default currency for a specific user. Accepts 3-letter ISO currency codes.","operationId":"updateUserCurrency","parameters":[{"name":"username","in":"path","description":"Username of the user to update","required":true,"schema":{"type":"string"}},{"name":"currencyCode","in":"query","description":"Currency code (3-letter ISO)","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/UserDto"}}}}}}},"/api/users/{username}/country":{"put":{"tags":["User Management"],"summary":"Update user country","description":"Updates the country for a specific user. Accepts both alpha-2 and alpha-3 country codes.","operationId":"updateUserCountry","parameters":[{"name":"username","in":"path","description":"Username of the user to update","required":true,"schema":{"type":"string"}},{"name":"countryCode","in":"query","description":"Country code (alpha-2 or alpha-3)","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/UserDto"}}}}}}},"/api/wallets":{"get":{"tags":["wallet-controller"],"operationId":"getUserWallets","responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/WalletDto"}}}}}}},"post":{"tags":["wallet-controller"],"operationId":"createWallet","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/WalletDto"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/WalletDto"}}}}}}},"/api/wallets/{walletId}/set-default":{"post":{"tags":["wallet-controller"],"operationId":"setDefaultWallet","parameters":[{"name":"walletId","in":"path","required":true,"schema":{"type":"string","format":"uuid"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/WalletDto"}}}}}}},"/api/wallets/reorder":{"post":{"tags":["wallet-controller"],"operationId":"reorderWallets","requestBody":{"content":{"application/json":{"schema":{"type":"array","items":{"type":"string","format":"uuid"}}}},"required":true},"responses":{"200":{"description":"OK"}}}},"/api/wallets/type/{type}":{"get":{"tags":["wallet-controller"],"operationId":"getWalletsByType","parameters":[{"name":"type","in":"path","required":true,"schema":{"type":"string","enum":["BANK_ACCOUNT","CASH","CREDIT_CARD","SAVINGS","CUSTOM"]}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/WalletDto"}}}}}}}},"/api/wallets/default":{"get":{"tags":["wallet-controller"],"operationId":"getDefaultWallet","responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/WalletDto"}}}}}}},"/api/users/{username}":{"get":{"tags":["User Management"],"summary":"Get user by username","description":"Retrieves a user by their username","operationId":"getUserByUsername","parameters":[{"name":"username","in":"path","description":"Username to search for","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/UserDto"}}}}}}},"/api/users/{username}/exists":{"get":{"tags":["User Management"],"summary":"Check if user exists","description":"Checks whether a user with the specified username exists","operationId":"checkUserExists","parameters":[{"name":"username","in":"path","description":"Username to check","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK"}}}},"/api/users/me":{"get":{"tags":["User Management"],"summary":"Get or create current user","description":"Retrieves the current authenticated user or creates a new one if it doesn't exist. This implements the core requirement to create users on first Keycloak token authentication.","operationId":"getOrCreateCurrentUser","responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/UserDto"}}}}}}}},"components":{"schemas":{"WalletDto":{"type":"object","properties":{"id":{"type":"string","format":"uuid"},"username":{"type":"string"},"name":{"type":"string","maxLength":100,"minLength":1},"initialBalance":{"type":"number","minimum":0.0},"balance":{"type":"number"},"currency":{"type":"string","enum":["USD","EUR","GBP","JPY","CHF","CAD","AUD","CNY","HKD","SEK","NOK","DKK","PLN","CZK","HUF","RON","BGN","HRK","RUB","TRY","BRL","MXN","ARS","CLP","COP","PEN","UYU","VES","KRW","SGD","TWD","THB","MYR","IDR","PHP","VND","INR","PKR","BDT","LKR","NPR","MMK","KHR","LAK","MNT","KZT","UZS","TJS","TMT","AZN","GEL","AMD","KGS","UAH","BYN","MDL","RSD","BAM","MKD","ALL","XCD","BBD","JMD","TTD","BZD","GYD","SRD","FJD","WST","TOP","VUV","PGK","SBD","KID","TVD","NIO","GTQ","HNL","SVC","PAB","CRC","BOB","EGP","MAD","TND","DZD","LYD","SDG","NGN","KES","GHS","XOF","XAF","XPF","ZAR","BWP","NAM","LSL","SZL","ZMW","ZWL","MWK","TZS","UGX","RWF","BIF","KMF","DJF","SOS","ERN","STN","CVE","GMD","GNF","SLL","LRD","GIP","FKP","SHP","IMP","JEP","GGP","ANG","AWG","BMD","KYD","BND","MOP","BTN","MVR","SCR","MUR","CDF","ETB","XDR","XAU","XAG","XPT","XPD"]},"iconUrl":{"type":"string","maxLength":500,"minLength":0},"goalAmount":{"type":"number","minimum":0.0},"type":{"type":"string","enum":["BANK_ACCOUNT","CASH","CREDIT_CARD","SAVINGS","CUSTOM"]},"isDefault":{"type":"boolean"},"orderPosition":{"type":"integer","format":"int32","minimum":0},"description":{"type":"string","maxLength":500,"minLength":0},"color":{"type":"string","maxLength":7,"minLength":7,"pattern":"^#[0-9A-Fa-f]{6}$"},"active":{"type":"boolean"},"createdAt":{"type":"string","format":"date-time"},"updatedAt":{"type":"string","format":"date-time"},"createdBy":{"type":"string"},"updatedBy":{"type":"string"}},"required":["currency","initialBalance","isDefault","name","orderPosition","type","username"]},"UserDto":{"type":"object","properties":{"username":{"type":"string"},"country":{"type":"string","enum":["US","CA","GB","DE","FR","IT","ES","NL","BE","CH","AT","SE","NO","DK","FI","PL","CZ","HU","RO","BG","HR","SI","SK","LT","LV","EE","IE","PT","GR","CY","MT","LU","JP","CN","KR","IN","AU","NZ","SG","HK","TW","TH","MY","ID","PH","VN","MX","BR","AR","CL","CO","PE","VE","UY","PY","BO","EC","GT","HN","SV","NI","CR","PA","IL","AE","SA","TR","EG","ZA","NG","KE","MA","TN","DZ","LY","SD","ET","GH","CI","SN","RU","UA","BY","MD","RS","ME","BA","MK","AL","XK","IS","GL","FO","AD","MC","LI","SM","VA"]},"defaultCurrency":{"type":"string","enum":["USD","EUR","GBP","JPY","CHF","CAD","AUD","CNY","HKD","SEK","NOK","DKK","PLN","CZK","HUF","RON","BGN","HRK","RUB","TRY","BRL","MXN","ARS","CLP","COP","PEN","UYU","VES","KRW","SGD","TWD","THB","MYR","IDR","PHP","VND","INR","PKR","BDT","LKR","NPR","MMK","KHR","LAK","MNT","KZT","UZS","TJS","TMT","AZN","GEL","AMD","KGS","UAH","BYN","MDL","RSD","BAM","MKD","ALL","XCD","BBD","JMD","TTD","BZD","GYD","SRD","FJD","WST","TOP","VUV","PGK","SBD","KID","TVD","NIO","GTQ","HNL","SVC","PAB","CRC","BOB","EGP","MAD","TND","DZD","LYD","SDG","NGN","KES","GHS","XOF","XAF","XPF","ZAR","BWP","NAM","LSL","SZL","ZMW","ZWL","MWK","TZS","UGX","RWF","BIF","KMF","DJF","SOS","ERN","STN","CVE","GMD","GNF","SLL","LRD","GIP","FKP","SHP","IMP","JEP","GGP","ANG","AWG","BMD","KYD","BND","MOP","BTN","MVR","SCR","MUR","CDF","ETB","XDR","XAU","XAG","XPT","XPD"]},"createdAt":{"type":"string","format":"date-time"},"updatedAt":{"type":"string","format":"date-time"}}}}}}