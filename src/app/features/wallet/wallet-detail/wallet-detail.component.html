<div class="wallet-container" *ngIf="wallet">
  <app-page-header>
    <div class="wallet-info" slot="title">
      <img [src]="wallet.iconUrl || 'assets/icons/' + wallet.type + '.png'" alt="{{ wallet.name }} icon" />
      <h1 class="wallet-name">
        {{ wallet.name }}
      </h1>
      <h1
        class="wallet-balance"
        [class.positive]="wallet.balance && wallet.balance > 0"
        [class.negative]="wallet.balance && wallet.balance < 0"
        [class.zero]="!wallet.balance || wallet.balance === 0"
      >
        ({{ wallet.balance | pockitoCurrency : wallet.currency }})
      </h1>
    </div>

    <div slot="actions">
      <p-menu #menu [model]="menuItems" [popup]="true" appendTo="body" />
      <p-button (onClick)="menu.toggle($event)" icon="pi pi-ellipsis-v" />
    </div>
  </app-page-header>

  <div class="wallets-content">
    <div class="wallets-transactions"></div>
    <div class="wallets-transactions-header">
      <h2>{{ "wallets.transactions" | translate }}</h2>
    </div>
    <app-transaction-list
      [pageableTransactions]="pageableTransactions"
      [wallet]="wallet"
      [walletId]="walletId"
      (loadMore)="onLoadMore()"
    ></app-transaction-list>
  </div>
</div>

<!-- Wallet Form Dialog -->
<p-dialog
  [maximizable]="true"
  [(visible)]="displayEditWalletDialog"
  [breakpoints]="{ '960px': '90vw', '640px': '100vw' }"
  [style]="{ width: '60vw' }"
  [modal]="true"
  [header]="'wallets.createWallet' | translate"
  [closable]="true"
  [closeOnEscape]="true"
>
  <app-wallet-form
    *ngIf="displayEditWalletDialog"
    (walletSaved)="onWalletSaved($event)"
    (formCancelled)="onFormCancelled()"
    [walletId]="wallet?.id"
  ></app-wallet-form>
</p-dialog>
