<div
  class="wallet-item"
  (click)="onViewWallet()"
  [title]="('wallet.click_to_view' | translate) + ' ' + wallet.name"
  [style.--wallet-color]="getWalletColor()"
  [style.--wallet-color-light]="getWalletColorVariants().light"
  [style.--wallet-color-dark]="getWalletColorVariants().dark"
  [style.--wallet-color-gradient]="getWalletColorVariants().gradient"
>
  <div class="item-icon">
    <img
      [src]="getWalletIconUrl()"
      [alt]="wallet.name"
      class="icon-small"
      (error)="onImageError($event)"
    />
  </div>
  
  <div class="item-info">
    <h3 class="title">{{ wallet.name }}</h3>
    <div class="meta">
      <span class="special-indicator" *ngIf="isWalletDefault()">
        <i class="pi pi-star-fill"></i>
      </span>
    </div>
    <div class="description-mobile" *ngIf="wallet.description">
      {{ wallet.description }}
    </div>
  </div>
  
  <div class="item-balance">
    <span class="balance-value" [style.color]="(wallet.balance || 0) >= 0 ? 'var(--pockito-success)' : 'var(--pockito-error)'">
      {{ (wallet.balance || 0) >= 0 ? '+' : '' }}{{ wallet.balance | pockitoCurrency:wallet.currency:'code' }}
    </span>
    <div class="goal-progress-mobile" *ngIf="getGoalProgress().hasGoal">
      <div class="progress-bar">
        <div 
          class="progress-fill" 
          [style.width.%]="getGoalProgress().progress"
          [class.complete]="getGoalProgress().isComplete"
        ></div>
      </div>
      <span class="progress-text">{{ getGoalProgress().progress }}%</span>
    </div>
  </div>
  
   <!-- action buttons -->
   <div class="action-buttons">
     <p-button 
       icon="pi pi-ellipsis-v" 
       styleClass="p-button-text p-button-rounded menu-btn"
       (click)="menu.toggle($event); $event.stopPropagation()"
       [pTooltip]="'wallet.actions.menu' | translate"
       tooltipPosition="left"
     ></p-button>
     <p-menu 
       #menu 
       [model]="menuItems" 
       [popup]="true"
       styleClass="wallet-action-menu"
       appendTo="body"
     ></p-menu>
  </div>

  <!-- Reorder buttons -->
  <div class="reorder-buttons">
    <button 
      class="reorder-btn up-btn" 
      (click)="onMoveUp(); $event.stopPropagation()"
      [disabled]="!canMoveUp"
      [title]="'wallet.move_up' | translate"
      type="button"
    >
      <i class="pi pi-chevron-up"></i>
    </button>
    <button 
      class="reorder-btn down-btn" 
      (click)="onMoveDown(); $event.stopPropagation()"
      [disabled]="!canMoveDown"
      [title]="'wallet.move_down' | translate"
      type="button"
    >
      <i class="pi pi-chevron-down"></i>
    </button>
  </div>
</div>
