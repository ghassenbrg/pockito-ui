<div
  class="wallet-card"
  [class.inactive]="!isWalletActive()"
  [style.--wallet-color]="getWalletColor()"
  [style.--wallet-color-light]="getWalletColorVariants().light"
  [style.--wallet-color-dark]="getWalletColorVariants().dark"
  [style.--wallet-color-gradient]="getWalletColorVariants().gradient"
>
  <div class="card-header">
    <div class="icon-container">
      <img
        [src]="getWalletIconUrl()"
        [alt]="wallet.name"
        class="icon"
        (error)="onImageError($event)"
      />
      <div class="icon-overlay" *ngIf="!isWalletActive()">
        <i class="pi pi-pause"></i>
      </div>
    </div>
    <div class="info">
      <h3 class="title">{{ wallet.name }}</h3>
      <span class="subtitle">{{ 'wallet.types.' + wallet.type.toUpperCase() | translate }}</span>
    </div>
    <div class="status">
      <span class="status-badge" [class.active]="isWalletActive()">
        {{ isWalletActive() ? ('wallet.status.active' | translate) : ('wallet.status.inactive' | translate) }}
      </span>
      <span class="special-badge" *ngIf="isWalletDefault()">
        <i class="pi pi-star-fill"></i>
        {{ 'wallet.status.default' | translate }}
      </span>
    </div>
  </div>

  <div class="card-content">
    <div class="balance-section">
      <div class="balance-row">
        <span class="label">{{ 'wallet.balance' | translate }}:</span>
        <span class="value" [style.color]="(wallet.balance || 0) >= 0 ? 'var(--pockito-success)' : 'var(--pockito-error)'">
          {{ (wallet.balance || 0) >= 0 ? '+' : '' }}{{ wallet.balance | pockitoCurrency:wallet.currency:'code' }}
        </span>
      </div>
    </div>

    <div class="progress-section" *ngIf="getGoalProgress().hasGoal">
      <div class="progress-header">
        <span class="label">{{ 'wallet.goal' | translate }}:</span>
        <span class="value">
          {{ (wallet.goalAmount ?? 0) | pockitoCurrency:wallet.currency:'code' }}
        </span>
      </div>
      <div class="progress-container">
        <div class="progress-bar">
          <div 
            class="progress-fill" 
            [style.width.%]="getGoalProgress().progress"
            [class.complete]="getGoalProgress().isComplete"
          ></div>
        </div>
        <span class="progress-text">{{ getGoalProgress().progress }}%</span>
      </div>
    </div>

    <div class="description" *ngIf="wallet.description">
      <p class="description-text">{{ wallet.description }}</p>
    </div>
  </div>

  <div class="card-actions">
    <button 
      pButton 
      class="action-btn view-btn" 
      (click)="onViewWallet()" 
      [pTooltip]="'wallet.actions.view' | translate"
      tooltipPosition="top"
      icon="pi pi-eye"
    ></button>
    <button 
      pButton 
      class="action-btn edit-btn" 
      (click)="onEditWallet()" 
      [pTooltip]="'wallet.actions.edit' | translate"
      tooltipPosition="top"
      icon="pi pi-pencil"
    ></button>
    <button 
      pButton 
      class="action-btn default-btn" 
      (click)="onMakeDefault()" 
      [disabled]="isWalletDefault()"
      [pTooltip]="isWalletDefault() ? ('wallet.actions.already_default' | translate) : ('wallet.actions.make_default' | translate)"
      tooltipPosition="top"
      icon="pi pi-star"
    ></button>
    <button 
      pButton 
      class="action-btn delete-btn" 
      (click)="onDeleteWallet()" 
      [pTooltip]="'wallet.actions.delete' | translate"
      tooltipPosition="top"
      icon="pi pi-trash"
    ></button>
  </div>
</div>
