<div class="wallets-container">
  <!-- Page Header -->
  <app-page-header 
    [config]="headerConfig"
    (buttonClick)="createWallet()"
    (secondaryButtonClick)="onSecondaryButtonClick()"
  ></app-page-header>

  <!-- View Switcher -->
  <app-view-switcher
    [currentView]="(currentViewMode$ | async) || 'cards'"
    (viewChange)="onViewModeChange($event)"
  ></app-view-switcher>

  <!-- Wallets Content -->
  <div class="wallets-content">
    <!-- Card Mode (Desktop) -->
    <div class="wallets-grid" [class.hidden]="(currentViewMode$ | async) === 'list'">
      <app-wallet-card
        *ngFor="let wallet of wallets$ | async; trackBy: trackByWalletId"
        [wallet]="wallet"
        [canMoveUp]="(walletFacade.canMoveWalletUp(wallet.id!) | async) || false"
        [canMoveDown]="(walletFacade.canMoveWalletDown(wallet.id!) | async) || false"
        (viewWallet)="onViewWallet($event)"
        (editWallet)="onEditWallet($event)"
        (deleteWallet)="onDeleteWallet($event)"
        (makeDefault)="onMakeDefault($event)"
        (moveUp)="onMoveUp($event)"
        (moveDown)="onMoveDown($event)"
      ></app-wallet-card>
    </div>

    <!-- List Mode (Mobile) -->
    <div class="wallets-list" [class.hidden]="(currentViewMode$ | async) === 'cards'">
      <app-wallet-list-item
        *ngFor="let wallet of wallets$ | async; trackBy: trackByWalletId"
        [wallet]="wallet"
        [canMoveUp]="(walletFacade.canMoveWalletUp(wallet.id!) | async) || false"
        [canMoveDown]="(walletFacade.canMoveWalletDown(wallet.id!) | async) || false"
        (viewWallet)="onViewWallet($event)"
        (editWallet)="onEditWallet($event)"
        (deleteWallet)="onDeleteWallet($event)"
        (makeDefault)="onMakeDefault($event)"
        (moveUp)="onMoveUp($event)"
        (moveDown)="onMoveDown($event)"
      ></app-wallet-list-item>
    </div>

    <!-- Empty State -->
    <div class="empty-state" *ngIf="(wallets$ | async)?.length === 0">
      <div class="empty-icon">
        <i class="pi pi-wallet"></i>
      </div>
      <h3 class="empty-title">{{ 'wallet.empty_state.title' | translate }}</h3>
      <p class="empty-description">
        {{ 'wallet.empty_state.description' | translate }}
      </p>
      <button 
        class="empty-action" 
        pButton 
        (click)="createWallet()"
        [label]="'wallet.new_wallet' | translate"
        icon="pi pi-plus"
        class="p-button-primary"
      ></button>
    </div>
  </div>
</div>
